#+STARTUP: all
#+SETUPFILE: ~/.emacs.d/org-styles/html/main.theme
#+TITLE: 网络基础
#+DATE: [2021-04-11 10:28]
* Refers
* More
** 以太网与互联网
通过范围和区域来分类的有: 互联网 Internet, 广域网 WAN, 局域网 LAN.
通过传输技术分类: 以太网 Ethernet, ATM 网, FDDI 网.

前者使用传输技术, 实现网路连通. 
* Proto 协议
** OSI
OSI 参考模型, 根据作用进行分类.
- 应用层: 顾名思义, 应用件的协议
- 表示层: 顾名思义, 基本格式的转译, 如图片文字音频等
- 会话层: 负责通信的开始结束和持续.
- 传输层: 负责数据的传输, 控制丢包等.
- 网络层: 负责地址和路由的选择, 找路的
- 数据链路层: 数据帧到比特流转换, 机器可读到链路可读.
- 物理层: 比特流变成物理信号., 高低电流, 电压, 光的闪灭
** 运作
1. 从顶层到底层物理层
2. 物理层传给路由寻址
3. 路由从网路层及膝到网络层, 执行判断递归寻址
4. 到目的地, 解析数据到顶层应用层展示

   其中人类能看懂的是会话层以上的操作:
   1. 应用层, 应用自定义解析和展示, 任何人可读
   2. 表示层, 基于不同格式文件和数据进行格式化, 如 UTF-8 等, 程序员可读
   3. 会话层, 应用基于什么链接方式进行通信, 单发还是连续的, 产品开发控制

      机器控制, 基本不变的东西:
      1. 传输层, 确保信息完成, 没收到及时反馈 "你刚才说了啥" 给对方.
      2. 网络层, 世界这么大, 需要挨家挨户去问路
      3. 数据链路层, 转码
      4. 物理层, 存储和上报 MAC 物理地址.
         发送的信息会带上 MAC 物理地址的头发, 让转发到网络的传输介质的信息能准确发给物理设备. 
* 类别
链接: 有链接, 无链接. 
   
网络通信方式分为: 电路交换和分组交换
- 电路交换: 单条电路单个链接, 容易堵塞排队但稳定
- 分组交换: 多条电路单个链接, 分包发送

  分组交换容易收到缓存饱和, 溢出传送失败等问题, 需要保证包的数据完整.

  接收端量级:
  - 单播: 1 对 1
  - 广播: 多所有连接的主机
  - 任播: 面向多个, 找出最适合的主机, DNS 域名解析服务器
  - 多播: 连接的部分主机, 视频会议
* 地址
MAC 是最终目标, 由厂商控制对应网卡标志.
MAC 的寻址表叫地址转发表.
IP 的寻址表叫路由控制表.
IP 通过子网掩码层层解析, 网络号可以判断大致地址因为同一网段属于同一部门或者地区. 
* 硬件
   
** 网卡 Network interface card 
因为 MAC 是标志身份的工具, 是最终目的地.

所以通过一些工具欺骗操作系统, 实现 MAC 欺骗就可以修改计算机的身份.
可以闯过服务器和路由器的访问控制列表, 用于模拟设备或者隐藏计算机.
局限, 尽显本地广播域, 与 IP 地址欺骗不同. 
    
** 中继器 Repeater
提速, 信号放大, 如电信号变成光信号.
在 OSI 的第一层. 
** 网桥 Bridge 2 层交换机
自学式, 记录 MAC 地址和硬件地址.
在 OSI 的第二层. 
** 路由器 Router 3 层交换机
IP 地址寻址. 
OSI 第三层. 
** 4-7 层交换机
域名转发, 负载均衡器, 加速器防火墙等. 
** 网关 Gateway
与 4-7 层交换机类似.
负责数据转换和转发. 
做硬件的协议转换, 如电脑到手机的邮件.
代理服务器.
在传输层之上. 
* 通信路径
骨干网络 BackBone 的出口即边缘网络 Stub.
边缘网络链接用户的接入口即接入层或者汇聚层. 
   
1. wifi 无线局域网/交换机
2. 家庭或者公司, 接入层
3. 交换机连接通信公司的边缘网络
4. 骨干网络

   每个网络通过 NOC Network Operation Center 相连.
   网络连接方式(如以太网)和使用方式允许不同.
   异构网络通过 IX Internet Exchange 想连. 
** 移动通信
1. 手机与最近距离的基站通信, 相当于接入层
* TCP/IP
TCP Transmission Control Protocol.
IP Internet Protocol.
** 历史
1. 国防部 DoD The Department of Defanse 想做一种迂回线路, 保证单条线路被破坏也可以通信.
   分组交换的概念出现.
2. ARPANET 阿帕网的出现.
   1982 定下 TCP/IP 规范, 次年指定为阿帕网指定协议.
3. 同时, BSD UNIX 发布, 支持 TCP/IP.
   基于 UNIX 主机形式, 开始链接各个基点. 网络扩张.
4. 各厂商被迫顺从.
5. 商业化, 从使用到输出.
   ISP Internet Service Provider 出现.
** 含义
有时可特指两种协议, 也可以说是涵盖一堆协议的族群. 

- 开放标准由 IETF 制定, 允许任何人讨论.
- 实用性, 首要任务是真正实现通信, 再做标准.
  必须被广泛使用, 充分实验之后, 才允许纳入标准, 而非相反顺序. 

  规范通过 RFC Request For Comment 讨论统一.
  通过 STD Standard 标记管理多个 RFC 编号号, 对应同一个协议.
  Exp: IPv6 https://www.rfc-editor.org/rfc/rfc2460.txt
** 分层
1. 应用层
2. 传输层 TCP, UDP 等
3. 互联网层 ARP, IP, ICMP 等
4. 网卡层
5. 硬件

   其中应用层含有各种常用协议, 如 http, 邮件等.
   传输层和互联网层为操作系统控制.
   下层为硬件控制. 

   相比于 OSI, TCP/IP 模型更注重实现, 应用程序的对应. 
** 协议
*** IP
跨越网络的协议.
IP 地址作为主机标志.
具备分组交换的设计, 属于非可靠协议. 
*** ICMP
诊断 IP 数据包异常的协议.
*** ARP
从 IP 分组数据包的 IP 地址中解析 MAC 地址. 
